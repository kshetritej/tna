(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{2298:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(5898),s=a(6650);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},2713:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var r=a(2074);function s(e,t){let a=(0,r.a)(e,null==t?void 0:t.in),s=a.getMonth();return a.setFullYear(a.getFullYear(),s+1,0),a.setHours(23,59,59,999),a}},3568:(e,t,a)=>{Promise.resolve().then(a.bind(a,7404))},4722:(e,t,a)=>{"use strict";a.d(t,{U:()=>s});var r=a(7764);function s(e,t,a){let[s,n]=(0,r.x)(null==a?void 0:a.in,e,t);return 12*(s.getFullYear()-n.getFullYear())+(s.getMonth()-n.getMonth())}},4813:(e,t,a)=>{"use strict";a.d(t,{$:()=>o,r:()=>l});var r=a(5881);a(6797);var s=a(9855),n=a(1564),i=a(2298);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:n,asChild:o=!1,...c}=e,d=o?s.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:n,className:t})),...c})}},5150:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(3055).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5623:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>d});var r=a(5881);a(6797);var s=a(2298);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},7404:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var r=a(5881),s=a(70),n=a.n(s),i=a(9212),l=a(8996),o=a(8401),c=a(5841),d=a(7764),u=a(2074);function f(e,t){let a=(0,u.a)(e)-(0,u.a)(t);return a<0?-1:a>0?1:a}var m=a(6712),h=a(4722),x=a(2713),v=a(5623),g=a(4813),p=a(7986);let b=(0,a(3055).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var j=a(5150),N=a(7269),y=a(3078),w=a(7329);function k(){let{data:e,isLoading:t}=(0,N.I)({queryKey:["posts"],queryFn:()=>y.A.get("/api/post").then(e=>e.data)}),a=null;{let e=localStorage.getItem("token");if(e)try{a=(0,w.s)(e)}catch(e){console.error("Error decoding token:",e)}}return t?(0,r.jsx)("div",{className:"h-[80vh]",children:"Loading..."}):(0,r.jsx)("div",{className:"container py-8 px-4 mx-auto",children:(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Community Forum"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Connect with peers, share experiences, and find support"})]}),a&&(0,r.jsx)(g.$,{asChild:!0,children:(0,r.jsx)(n(),{href:"/community/create",children:"Create Post"})})]}),(0,r.jsx)("div",{className:"grid gap-4",children:null==e?void 0:e.map(e=>{var t,a;return(0,r.jsx)(n(),{href:"/community/".concat(e.id),className:"block",children:(0,r.jsxs)(v.Zp,{className:"hover:bg-muted/50 transition-colors",children:[(0,r.jsx)(v.aR,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(v.ZB,{className:"text-xl",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center text-muted-foreground text-sm",children:[(0,r.jsx)(b,{className:"h-4 w-4 mr-1"}),e.comments.length]})]})}),(0,r.jsx)(v.Wu,{className:"pb-2",children:(0,r.jsx)("p",{className:"text-muted-foreground line-clamp-2",children:e.content})}),(0,r.jsxs)(v.wL,{className:"pt-0 flex justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(p.Avatar,{className:"h-6 w-6",children:[(0,r.jsx)(p.AvatarImage,{src:e.author.image||"/placeholder.svg",alt:e.author.name}),(0,r.jsx)(p.AvatarFallback,{children:(0,r.jsx)(j.A,{className:"h-4 w-4"})})]}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:e.author.name})]}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:(t=e.createdAt,a={addSuffix:!0},function(e,t,a){var r,s;let n,i=(0,o.q)(),v=null!=(s=null!=(r=null==a?void 0:a.locale)?r:i.locale)?s:l.c,g=f(e,t);if(isNaN(g))throw RangeError("Invalid time value");let p=Object.assign({},a,{addSuffix:null==a?void 0:a.addSuffix,comparison:g}),[b,j]=(0,d.x)(null==a?void 0:a.in,...g>0?[t,e]:[e,t]),N=function(e,t,a){var r;return(r=void 0,e=>{let t=(r?Math[r]:Math.trunc)(e);return 0===t?0:t})(((0,u.a)(e)-(0,u.a)(t))/1e3)}(j,b),y=Math.round((N-((0,c.G)(j)-(0,c.G)(b))/1e3)/60);if(y<2)if(null==a?void 0:a.includeSeconds)if(N<5)return v.formatDistance("lessThanXSeconds",5,p);else if(N<10)return v.formatDistance("lessThanXSeconds",10,p);else if(N<20)return v.formatDistance("lessThanXSeconds",20,p);else if(N<40)return v.formatDistance("halfAMinute",0,p);else if(N<60)return v.formatDistance("lessThanXMinutes",1,p);else return v.formatDistance("xMinutes",1,p);else if(0===y)return v.formatDistance("lessThanXMinutes",1,p);else return v.formatDistance("xMinutes",y,p);if(y<45)return v.formatDistance("xMinutes",y,p);if(y<90)return v.formatDistance("aboutXHours",1,p);if(y<m.F6){let e=Math.round(y/60);return v.formatDistance("aboutXHours",e,p)}if(y<2520)return v.formatDistance("xDays",1,p);else if(y<m.Nw){let e=Math.round(y/m.F6);return v.formatDistance("xDays",e,p)}else if(y<2*m.Nw)return n=Math.round(y/m.Nw),v.formatDistance("aboutXMonths",n,p);if((n=function(e,t,a){let[r,s,n]=(0,d.x)(void 0,e,e,t),i=f(s,n),l=Math.abs((0,h.U)(s,n));if(l<1)return 0;1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-i*l);let o=f(s,n)===-i;(function(e,t){let a=(0,u.a)(e,void 0);return+function(e,t){let a=(0,u.a)(e,null==t?void 0:t.in);return a.setHours(23,59,59,999),a}(a,void 0)==+(0,x.p)(a,t)})(r)&&1===l&&1===f(r,n)&&(o=!1);let c=i*(l-o);return 0===c?0:c}(j,b))<12){let e=Math.round(y/m.Nw);return v.formatDistance("xMonths",e,p)}{let e=n%12,t=Math.trunc(n/12);return e<3?v.formatDistance("aboutXYears",t,p):e<9?v.formatDistance("overXYears",t,p):v.formatDistance("almostXYears",t+1,p)}}(t,(0,i.w)(t,Date.now()),a))})]})]})},e.id)})})]})})}},7986:(e,t,a)=>{"use strict";a.d(t,{Avatar:()=>i,AvatarFallback:()=>o,AvatarImage:()=>l});var r=a(5881);a(6797);var s=a(3138),n=a(2298);function i(e){let{className:t,...a}=e;return(0,r.jsx)(s.bL,{"data-slot":"avatar",className:(0,n.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)(s._V,{"data-slot":"avatar-image",className:(0,n.cn)("aspect-square size-full",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)(s.H4,{"data-slot":"avatar-fallback",className:(0,n.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...a})}}},e=>{var t=t=>e(e.s=t);e.O(0,[259,70,361,34,595,424,364,770,358],()=>t(3568)),_N_E=e.O()}]);